{{- if (and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "debian")) -}}
#!/usr/bin/bash
echo -e "\033[0;32m>>>>> Fish APT : Begin <<<<<\033[0m"

if ! $(dpkg-query -W -f='installed' fish &> /dev/null); then
  echo "installing fish"
  echo "deb http://download.opensuse.org/repositories/shells:/fish:/release:/3/Debian_12/ /" | sudo tee /etc/apt/sources.list.d/shells:fish:release:3.list
  curl -fsSL https://download.opensuse.org/repositories/shells:fish:release:3/Debian_12/Release.key | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/shells_fish_release_3.gpg > /dev/null
  sudo apt update --yes
  sudo apt install --yes fish
else
  echo "fish already installed"
fi

echo -e "\033[0;32m>>>>> Fish APT : End <<<<<\033[0m"
{{- end -}}
